package:
  name: var-test
  version: 2.3.4
  epoch: 5
  description: Test variable substitution
  copyright:
    - license: Apache-2.0

vars:
  custom-var: custom-value
  another-var: another-value

pipeline:
  - name: test-package-vars
    runs: |
      mkdir -p ${{targets.destdir}}/usr/share/var-test

      # Package variables
      echo "name=${{package.name}}" > ${{targets.destdir}}/usr/share/var-test/package-vars.txt
      echo "version=${{package.version}}" >> ${{targets.destdir}}/usr/share/var-test/package-vars.txt
      echo "epoch=${{package.epoch}}" >> ${{targets.destdir}}/usr/share/var-test/package-vars.txt
      echo "full-version=${{package.full-version}}" >> ${{targets.destdir}}/usr/share/var-test/package-vars.txt

  - name: test-target-vars
    runs: |
      # Target path variables
      echo "destdir=${{targets.destdir}}" > ${{targets.destdir}}/usr/share/var-test/target-vars.txt
      echo "contextdir=${{targets.contextdir}}" >> ${{targets.destdir}}/usr/share/var-test/target-vars.txt

  - name: test-custom-vars
    runs: |
      # Custom variables
      echo "custom-var=${{vars.custom-var}}" > ${{targets.destdir}}/usr/share/var-test/custom-vars.txt
      echo "another-var=${{vars.another-var}}" >> ${{targets.destdir}}/usr/share/var-test/custom-vars.txt
