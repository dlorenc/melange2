package:
  name: uses-test
  version: 1.0.0
  epoch: 0
  description: Test 'uses' pipeline syntax with inputs
  copyright:
    - license: MIT

pipeline:
  - name: setup-files
    runs: |
      mkdir -p ${{targets.destdir}}/usr/lib
      mkdir -p ${{targets.destdir}}/usr/include
      mkdir -p ${{targets.destdir}}/usr/share/man/man1
      mkdir -p ${{targets.destdir}}/usr/share/doc/uses-test

      # Create files that split pipelines will work with
      echo "library" > ${{targets.destdir}}/usr/lib/libuses.so.1.0.0
      echo "#define USES 1" > ${{targets.destdir}}/usr/include/uses.h
      echo ".TH USES 1" > ${{targets.destdir}}/usr/share/man/man1/uses.1
      echo "documentation" > ${{targets.destdir}}/usr/share/doc/uses-test/README

subpackages:
  - name: uses-test-dev
    description: Development files
    pipeline:
      - uses: split/dev

  - name: uses-test-doc
    description: Documentation
    pipeline:
      - uses: split/manpages
